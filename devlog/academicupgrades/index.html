<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 3.2.0">
  <meta name="generator" content="Hugo 0.52" />
  <meta name="author" content="Michael Pilosov">

  
  
  
  
    
  
  <meta name="description" content="Cataloging changes made to the Academic theme.">

  
  <link rel="alternate" hreflang="en-us" href="https://www.michaelpilosov.com/devlog/academicupgrades/">

  


  

  

  

  

  

  

  
  
  
  <meta name="theme-color" content="hsl(339, 90%, 68%)">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css" crossorigin="anonymous">
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono">
  

  <link rel="stylesheet" href="/styles.css">
  
  <link rel="stylesheet" href="/css/custom_css.css">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-122657370-3', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  
  <link rel="alternate" href="https://www.michaelpilosov.com/index.xml" type="application/rss+xml" title="Michael Pilosov: The Archives">
  <link rel="feed" href="https://www.michaelpilosov.com/index.xml" type="application/rss+xml" title="Michael Pilosov: The Archives">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://www.michaelpilosov.com/devlog/academicupgrades/">

  
  
  
  
    
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@Mathematical_MP">
  <meta property="twitter:creator" content="@Mathematical_MP">
  
  <meta property="og:site_name" content="Michael Pilosov: The Archives">
  <meta property="og:url" content="https://www.michaelpilosov.com/devlog/academicupgrades/">
  <meta property="og:title" content="Website Upgrading Logs | Michael Pilosov: The Archives">
  <meta property="og:description" content="Cataloging changes made to the Academic theme."><meta property="og:image" content="https://www.michaelpilosov.com/img/logo-dark.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2018-12-19T18:16:07-07:00">
  
  <meta property="article:modified_time" content="2019-01-01T14:25:00-07:00">
  

  

  

  <title>Website Upgrading Logs | Michael Pilosov: The Archives</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" class="dark">
  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" role="textbox" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/"><img src="/img/logo-dark.png" alt="Michael Pilosov: The Archives"></a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#about">
            
            <span>About</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#resume">
            
            <span>Résumé</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        

      </ul>

    </div>
  </div>
</nav>



<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <input name="q" type="search" class="form-control" id="search-query" placeholder="Search..." autocomplete="off">
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/devlog/academicupgrades/">Website</a>
    <ul class="nav docs-sidenav">
      
      <li class="active">
        <a href="/devlog/academicupgrades/">Upgrading</a>
      </li>
      
    </ul>
    

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/devlog/">devlog</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/devlog/docker/">Phase 0</a>
      </li>
      
      <li >
        <a href="/devlog/openscience/">Phase 1</a>
      </li>
      
      <li >
        <a href="/devlog/jupyterhub/">Phase 2</a>
      </li>
      
      <li >
        <a href="/devlog/widgets/">Widgets</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

    </div>

    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
      <p class="docs-toc-title">On this page</p>
      

      <nav id="TableOfContents">
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#changes-made-to-theme">Changes Made to Theme</a></li>
<li><a href="#to-do">To-Do</a></li>
<li><a href="#next-steps">Next Steps</a></li>
</ul></li>
<li><a href="#upgrading-to-hugo-v0-52">Upgrading to Hugo v0.52</a>
<ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#academic-theme-v0-3-32">Academic Theme v0.3.32</a></li>
<li><a href="#image-galleries">Image Galleries</a></li>
<li><a href="#dark-mode">Dark Mode</a></li>
<li><a href="#page-bundles">Page Bundles</a></li>
<li><a href="#search-filter">Search/Filter</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
</ul></li>
</ul>
</nav>

      <ul class="nav toc-top">
        <li><a href="#">Back to top</a></li>
      </ul>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article" itemscope itemtype="http://schema.org/Article">

        <div class="docs-article-container">
          <h1 itemprop="name">Website Upgrading Logs</h1>

          <div class="article-style" itemprop="articleBody">
            

<h1 id="introduction">Introduction</h1>

<p>This documents the changes made to the academic theme to make this website work when upgrading from Hugo ver=0.47 and Academic Theme ver=2.4.</p>

<p>The upgrade for this website was performed on 12-19-2018.</p>

<p>All in all, it took the better part of an entire day to get familiar with all the nooks and crannies of the new updates and plan out the migration of the more complicated website&hellip; <a href="https://www.mathematicalmichael.com" target="_blank">Mathematical Michael</a>.</p>

<h2 id="changes-made-to-theme">Changes Made to Theme</h2>

<ul>
<li>Removed Weibo sharing icon in <code>/layouts/partials/share</code> in the theme directory.</li>
<li>Changed footer in <code>layouts/partials/footer_section.html</code></li>
<li>Re-did <code>config.toml</code> line-by-line, disabled night/day mode.</li>

<li><p>Created slides and docs based on the <code>exampleSite</code> folder, including creating the directory <code>/assets/css/reveal_custom.css</code> for the Reveal.js slideshows.</p>

<ul>
<li>added <code>boards.jpg</code> to <code>/static/img/</code> to test headers and embeds in the example slideshow.</li>
<li>created <code>slides.md</code> in <code>/content/</code> to link to <code>/content/slides/</code> folder since using an index file does not work to list the available slideshows in that folder.</li>
</ul></li>

<li><p>created <code>/wid/</code> and <code>/dockerhub/</code> to experiment with new <code>docs</code> template.</p></li>

<li><p>copied over dummy project files, still need to migrate own projects to new formatting, remove dummy projects.</p></li>

<li><p>Changed <code>work</code> hyperlink and <code>resume</code> to reflect new migration to the <code>docs</code> template.</p></li>

<li><p>resume widget changed to hyperlink to resume doc.</p></li>
</ul>

<h2 id="to-do">To-Do</h2>

<ul>
<li>header/feature images for post, check how fb/twitter scrapes them.

<ul>
<li>optional feature image without becoming header will be useful for posts that are galleries.</li>
</ul></li>
<li>migrate any posts/projects to new formatting.</li>
<li>think about how to migrate MathematicalMichael.<br /></li>
</ul>

<h2 id="next-steps">Next Steps</h2>

<p><em>Things I&rsquo;m Considering</em></p>

<ul>
<li>No need to re-make publication type.

<ul>
<li>Since posts can be linked to projects, and filters can be applied within widgets, we should have all the flexibility we need.</li>
<li>Taken with the new folder structure of pages, the overall directory structure remains quite clean.</li>
</ul></li>

<li><p>Use widgets pagetype to construct/mimick the <code>/artwork</code> page.</p>

<ul>
<li>Have carousels and project widgets linking to galleries and slideshows.</li>
</ul></li>

<li><p>Can additionally link out to a <code>docs</code> page that describes the art in more depth, also linked to from the projects page of <code>Probably Art</code> to tell the &ldquo;story&rdquo; of this project over time and in its phases.</p>

<ul>
<li>Phase 1: Directed Study</li>
<li>Phase 2: Pickup with Pocket CHIP, restart coding in Python</li>
<li>Phase 3: After some time, picked it up again and added a whole bunch of functionality, attempted to get random art automated in Squarespace</li>
<li>Phase 4: Pick up again when I get into GCode. Adds functionality.</li>
<li>Phase 5: Lapse again. Then finally tackle creating a framework that will work long-term. Talk about requirements. How is has to be in Python, based on stable packages, recreatable and deterministic. GCode scalable. Talk about some to-do&rsquo;s (bumpers, bash scripts that wrap around to position plotter better). Show images of getting plotter back up again.<br /></li>
<li>Phase 6: Merge with Animation code/projects. Talk about goals, current progress. Random animations on non-random images<br /></li>
<li>Have another to tell the story of <code>Moving Pictures</code></li>
</ul></li>
</ul>

<hr />

<hr />

<h1 id="upgrading-to-hugo-v0-52">Upgrading to Hugo v0.52</h1>

<p>Date: 12/21/18</p>

<p>Today I began to structure and fill in the basic information for the <a href="/openscience">Open Science</a> Documentation.
It involved some research and collection of resources from disparated places and things I&rsquo;ve done before.</p>

<p>I also sat down and in a couple minutes managed to figure out the &ldquo;breaking changes&rdquo; to my MathematicalMichael website under Hugo v0.52.
The only file that needed to be changed (before updating the theme, that is) was the <code>$i,</code> reference in a file I made myself:</p>

<pre><code class="language-bash">vim themes/academic/layouts/partials/artwork_links.html 
</code></pre>

<p>Next step was to copy the theme from <code>michaelpilosov/</code> (which pulled from the github repo only a few days prior, and to which some minor changes were made) into <code>mathematicalmichael/themes/</code> along with a copy of the config file.</p>

<h2 id="motivation">Motivation</h2>

<p>Once the reference to the new theme is made, I expect a number of things to break.</p>

<blockquote>
<p>Here I will attempt to document one-by-one the changes I had to make to port my theme over, which I will attempt to do by leveraging the &ldquo;lookup structure&rdquo; of Hugo (something I read online).</p>
</blockquote>

<p>The idea is that rather than make changes to a theme that result in deviations that make merging new changes difficult, one makes changes by copying files into directories that are checked first, before <code>themes/</code> is searched for <code>layouts</code> or <code>partials</code> files.
My hope is that this will aid in future upgrades, since less differences will exist between my version of the theme and the master branch.
A really useful command (for comparing files), that I used to see what needed to change in the master configuration file for my theme (compared to the updated one from this website) was:</p>

<pre><code class="language-bash">diff -y file1.md file2.md
</code></pre>

<p>which will print out two files side-by-side directly into the UNIX Terminal. Excellent.</p>

<h2 id="academic-theme-v0-3-32">Academic Theme v0.3.32</h2>

<p>After making the appropriate changes to the <code>config.toml</code> file (which were all straightforward), I ensured that the site built with the new Hugo <em>and</em> the new configuration file but <em>without</em> the new theme. It did. All was well.</p>

<p>Then I changed the theme to point to the updated one:</p>

<pre><code>theme = &quot;hugo-academic&quot;
</code></pre>

<p>which yielded the following error (kind of expected to be honest):</p>

<pre><code class="language-bash">Error: 
Error building site: 
failed to render pages: 
render of &quot;home&quot; failed: 
execute of template failed: 
template: index.html:4:3: 
executing &quot;index.html&quot; at &lt;partial widget_page...&gt;: 
error calling partial: 
&quot;/media/mathematicalmichael/HANK/repos/mathematicalmichael/themes/hugo-academic/layouts/partials/widget_page.html:23:9&quot;: 
execute of template failed: 
template: partials/widget_page.html:23:9: 
executing &quot;partials/widget_page.html&quot; at &lt;partial $widget $par...&gt;: 
error calling partial: 
Partial &quot;widgets/artworks.html&quot; not found
</code></pre>

<p>So why did this happen?</p>

<p>Well, I had defined my own template page called <code>artworks</code> that was modeled on the <code>publications</code> style of page.
I used this to publish a webpage for each piece of art, complete with a rich tagging-system automated through Python.
I made random art and had written code that created pages for that art to live on.
Any changes made to the front-matter could be easily applied later.</p>

<p>I believe that simply moving some files to directories that exist <em>above</em> <code>themes</code> will resolve my problems.</p>

<h2 id="image-galleries">Image Galleries</h2>

<p>However, I know there will be an opportunity to switch to page-bundles and leverage the <code>image-gallery</code> feature in <code>v3.0</code> of <code>Hugo-Academic</code>. My thinking is as follows:</p>

<ul>
<li>Instead of daily pages, make weekly ones as galleries.</li>
<li>Alternatively, keep daily postings as-is, and add galleries additionally. See if you can link images to the main folder, so all art can continue to live in one folder without duplicates.</li>
<li>You can make galleries using page-bundles as a separate way to interact with the art.</li>

<li><p>Definitely need to integrate a widget page that hosts all the art. I don&rsquo;t want to clutter the home page with everything.</p>

<ul>
<li>I think that clicking from the main menu to <code>art/</code> should suffice.</li>
<li>Curate the experience, minimize contact with <code>/artwork/</code> page (i.e. make slideshows link to other content rather than the search they perform now, which can be a bit slow.</li>
</ul></li>

<li><p>Since slideshows are just a markdown file, we should have no trouble linking to images in another folder!</p>

<ul>
<li>will take some playing around to figure out exactly the right directory structure.</li>
</ul></li>
</ul>

<p>** Main Goal ** for the time being is to make sure the site builds with the new theme. We can add features and functionality later on.</p>

<p>Today&rsquo;s agenda is simply to allow migration to Hugo v0.52 on my Macbook by ensuring the site builds with the new version.
Having the new theme work would be an added bonus.</p>

<blockquote>
<p>I suspect all that needs to happen is a little migration of <code>partials</code> and <code>shortcodes</code>.</p>
</blockquote>

<pre><code class="language-bash">cp themes/academic/layouts/partials/artwork_* layouts/partials/
</code></pre>

<p>Did not change the error.</p>

<pre><code class="language-bash">mkdir layouts/partials/widgets/
cp themes/academic/layouts/partials/widgets/artworks* layouts/partials/widgets/
</code></pre>

<p>Resolved that but sprang a new error:</p>

<pre><code class="language-bash">Error: 
Error building site: 
failed to render pages: 
render of &quot;home&quot; failed: 
execute of template failed: 
template: 
index.html:4:3: 
executing &quot;index.html&quot; at &lt;partial widget_page...&gt;: 
error calling partial: 
&quot;/media/mathematicalmichael/HANK/repos/mathematicalmichael/themes/hugo-academic/layouts/partials/widget_page.html:23:9&quot;: 
execute of template failed: 
template: 
partials/widget_page.html:23:9: 
executing &quot;partials/widget_page.html&quot; at &lt;partial $widget $par...&gt;: 
error calling partial: 
Partial &quot;widgets/search.html&quot; not found
</code></pre>

<p>Okay, so let&rsquo;s move <code>widgets/search.html</code> over?</p>

<pre><code class="language-bash">cp themes/academic/layouts/partials/widgets/search.html layouts/partials/widgets/
</code></pre>

<pre><code class="language-bash">hugo server --disableFastRender
</code></pre>

<p>And that did it! Wow, relatively painless. Now let&rsquo;s see how it looks.</p>

<p>The layout is dark for some reason&hellip; Enabling light/dark mode shows me the white I want to see but with inverted header.
<code>:mailto</code> icon is broken. Change to &ldquo;fas&rdquo; instead of &ldquo;fab&rdquo; in <code>config.toml</code>, line 293.</p>

<p>Back to the theme.. let&rsquo;s grab a file and move it to the root directory and figure out where to put it.</p>

<pre><code class="language-bash">cp themes/hugo-academic/data/themes/dark.toml .
mkdir data
mkdir data/themes
mv dark.toml data/themes/
</code></pre>

<p>I then proceeded to change some things to get the right colors. Still not sure if this is correct. I also changed the theme to <code>self.toml</code> and referenced that in the <code>config.toml</code> file.</p>

<h2 id="dark-mode">Dark Mode</h2>

<p>Next test: Day/Night mode (re-enable, see what happens).</p>

<p>Day Mode is fine.
Night mode makes my logos look weird (though I do like the look overall). Top bar is also white instead of black for some reason.</p>

<p>Editing <code>data/themes/self.toml</code> to rename the theme (mistake to not have done that before), and toggle <code>light = true</code>, since I did make it into a light theme.</p>

<pre><code># Theme metadata
name = &quot;Self&quot;

# Is theme light or dark?
light = true

# Primary
primary = &quot;hsl(339, 90%, 68%)&quot;
primary_light = &quot;hsl(339, 90%, 78%)&quot;
primary_dark = &quot;hsl(339, 90%, 58%)&quot;

# Menu
menu_primary = &quot;#fff&quot;
menu_text = &quot;rgba(0,0,0,0.6)&quot;
menu_text_active = &quot;hsl(339, 90%, 68%)&quot;
menu_title = &quot;#2b2b2b&quot;

# Home sections
home_section_odd = &quot;rgb(255, 255, 255)&quot;
home_section_even = &quot;rgb(247, 247, 247)&quot;
</code></pre>

<p><em>Note</em>: Also broken is the search widget. Sad.</p>

<p>Disable search widget&hellip; Should not have moved it in the first place!
<em>There is a new search feature</em> that renders this one useless. I will now remove the <code>search.html</code> widget (and <code>search.md</code> from <code>content/home/</code></p>

<p>Contact form&hellip;
Had to paste in the new format. I was using a custom partial code (note to self&hellip; <em>delete that</em>) to make a formspree link. Now I don&rsquo;t have to!</p>

<p>Also, remove <code>Search</code> from menu in <code>config.toml</code>.
After deleting <code>layouts/shortcodes/contactme.html</code> (my custom formspree link), in favor of using the one the upgraded theme provided, it appears that my website is now settled into the new theme. I did have to remove all references to this deleted shortcode, of course.</p>

<p>Day/night mode works correctly. (would like to make my logo transparent though).</p>

<h2 id="page-bundles">Page Bundles</h2>

<p>Okay, well I knew it was too good to be true that things just worked. While pages loaded correctly, before building the final site, I made sure to investigate the directories a bit more and found that a bunch of files prepended with <code>._XXX.md</code> had populated my website directories.
<em>This must be how they&rsquo;re ensuring backward-compatibility.</em></p>

<p>Well, I refactored the pages into page bundles with this shell script:</p>

<pre><code class="language-bash">#!/bin/sh

# Helps migrate from v2.4.0 to v3.0.0
#
# Refactor a page named `X.md` to `content/&lt;section&gt;/X/index.md` to use the
# new page bundles and featured image system
#
# - E.g. a post `content/post/X.md` is converted to `content/post/X/index.md`

refactor_pages_to_page_bundles()
{
  if [ ! -d ./content/ ]; then
    echo &quot;Please run script from root of hugo site&quot;
  fi
  local files=&quot;$(find ./content/ -iname '*.md' -not -iname '*index.md' -not -ipath './content/home/*')&quot;
  for file in ${files}; do
    local pagedir=&quot;${file%.md}&quot;

    echo &quot;${file} -&gt; ${pagedir}/index.md&quot;
    if [ ! -d &quot;${pagedir}&quot; ]; then
      mkdir &quot;${pagedir}&quot;
    fi

    mv &quot;${file}&quot; &quot;${pagedir}/index.md&quot;
  done
}

# Bash Strict Mode
set -eu

# set -x
refactor_pages_to_page_bundles &quot;$@&quot;

</code></pre>

<p><a href="https://github.com/sourcethemes/academic-scripts/blob/master/refactor-pages-to-page-bundles.sh" target="_blank">Source</a></p>

<p>After poking around, it looks like the pages obey the proper structure now (for the most part)&hellip; There are a few stray <code>.md</code> files around.</p>

<p>I will push the changes live but later on go through both websites to ensure that bundles are everywhere and no stray pages are left.</p>

<hr />

<h2 id="search-filter">Search/Filter</h2>

<p>Notably, I will need to</p>

<ul>
<li>update my python script that writes project pages and art pages.</li>
<li>ensure featured images (optional) are properly handled</li>
<li>find out how galleries can work with the <code>artwork/images</code> directory, which so far doesn&rsquo;t seem to be conflicting with the page-bundle format.</li>
<li>Make sure the artwork search works. Seems to be broken, though <code>publications</code> search still works.</li>
</ul>

<p>Oh, I think all that needs to happen is to move
<code>/themes/academic/layouts/artwork</code> into the <code>layouts</code> folder I have in my root directory.</p>

<pre><code class="language-bash">mv themes/academic/layouts/artwork/ layouts/
</code></pre>

<p>But that led to an error regarding <code>partial header_image.html</code>. Thus, it seems like I will need to copy the new publication template over and edit it again. At least this time I will document it.</p>

<pre><code class="language-bash">cp themes/hugo-academic/layouts/publication/single.html  layouts/artwork/
</code></pre>

<p>And then I replaced all instances of <code>publication</code> with <code>artwork</code></p>

<p>But that still didn&rsquo;t lead to the filter-ability that I wanted.</p>

<p>The default behavior was to paginate and list all of the art, which doesn&rsquo;t have image previews but honestly is just fine, especially since it loads quickly.</p>

<p>The widget on the homepage that links to the search of artwork though is now broken as a consequence. I can fall back on searching by tags, or disable the widget temporarily until I set up galleries for the artworks.</p>

<ul>
<li>If I write a python script that scrapes the <code>artwork/images</code> folder and creates galleries linked to that, well that would be just perfect.</li>
<li>This widget can be linked to those galleries, or slideshows.</li>
<li>Disable it for now.</li>
</ul>

<p>Okay, later at night I had to come across this as well, but I wanted the listing of artworks in their projects, so I copied the new <code>layouts/partials/project/single.html</code> into the <code>layouts/partials/projects/</code> directory I created and pasted the following relevant chunk of code:</p>

<pre><code class="language-html">&lt;br&gt;
      &lt;h4&gt; Archive &lt;/h4&gt;
      {{ $items := where (where .Site.RegularPages &quot;Type&quot; &quot;artwork&quot;) &quot;.Params.projects&quot; &quot;intersect&quot; (slice $project) }}
      {{ $items := $items | union (where (where .Site.RegularPages &quot;Type&quot; &quot;artwork&quot;) &quot;.Params.url_project&quot; $project_path) }}
      {{ $arts_len := len $items }}
      {{ if ge $arts_len 1 }}
        &lt;h4&gt;{{ (i18n &quot;artworks&quot;) }}&lt;/h4&gt;
        {{ range $items }}
          {{ if eq $page.Site.Params.projects.artwork_format 1 }}
            {{ partial &quot;artwork_li_detailed&quot; . }}
          {{ else }}
            {{ partial &quot;artwork_li_simple&quot; . }}
          {{ end }}
        {{ end }}
      {{ end }}
</code></pre>

<p>And I got my desired lists!</p>

<p><a href="https://www.mathematicalmichael.com/project/rnr" target="_blank">See here for example</a>.</p>

<h2 id="table-of-contents">Table of Contents</h2>

<p>I also realized I needed to edit the table of contents with some custom CSS.</p>

<p>Create a custom file in <code>/static/css</code> and link it to line <code>custom_css = []</code> in <code>config.toml</code>:</p>

<pre><code>#TableOfContents{
    padding-left: 10px
}
</code></pre>

          </div>

          


<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/dev/">dev</a>
  
  <a class="badge badge-light" href="/tags/webdev/">webdev</a>
  
</div>



        </div>

        <div class="body-footer">
          Last updated on Jan 1, 2019
        </div>

      </article>

      <footer class="site-footer">
  
  <p class="powered-by">
    <a href="/privacy/">Privacy Policy</a>
  </p>
  

  <p class="powered-by">
    &copy; 2019 Michael Pilosov &middot; 

    
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic</a> +
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>

    
  </p>
</footer>


    </main>
  </div>
</div>

    

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
      

      
      
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
    
    <script src="/js/academic.min.d037ee5294b166a79dec317c58aea9cc.js"></script>

    

  </body>
</html>


